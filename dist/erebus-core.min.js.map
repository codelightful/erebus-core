{"version":3,"file":"erebus-core.min.js","sources":["../src/utils.mjs","../src/cookies.mjs","../src/random.mjs","../src/handler.mjs","../src/events.mjs","../src/element.mjs","../src/http.mjs","../src/i18n.mjs","../src/erebus.mjs"],"sourcesContent":["const $module = {};\r\n\r\n/**\r\n * Allows to determine if a specific instance is a promise object (or a promise-like object)\r\n * @param {*} value Object to evaluate\r\n * @returns Boolean value to determine if the object is a promise or not\r\n */\r\n$module.isPromise = function(value) {\r\n\tif (!value) {\r\n\t\treturn false;\r\n\t}\r\n\treturn (value instanceof Promise) || (typeof (value.then === 'function') && typeof (value.catch) === 'function');\r\n};\r\n\r\n/** Trims a string by removing leading and trailing white spaces  */\r\n$module.trim = function (value) {\r\n\tif(typeof(value) !== 'string') {\r\n\t\treturn value;\r\n\t}\r\n\treturn value.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n};\r\n\r\nexport default $module;","import utils from './utils.mjs';\r\n\r\nconst $module = {};\r\n\r\n/**\r\n * Sets a specific cookie\r\n * @param name Name of the cookie to set\r\n * @param value Value to set\r\n * @param timespan Timspan to maintain the cookie in seconds\r\n */\r\n$module.set = function (name, value, timespan) {\r\n\tif (!name) {\r\n\t\tthrow Error('erebus.cookies.set.null_cookie_name');\r\n\t}\r\n\tif (typeof (timespan) !== 'number') {\r\n\t\ttimespan = 3600;\r\n\t}\r\n\tconst expireDate = new Date();\r\n\texpireDate.setTime(expireDate.getTime() + (timespan * 1000));\r\n\tvar cookie = utils.trim(name) + '=' + value + '; expires=' + expireDate.toGMTString() + '; path=/';\r\n\tdocument.cookie = cookie;\r\n};\r\n\r\n/**\r\n * Obtains the value from a cookie\r\n * @param name Name of the cookie to obtain\r\n * @returns Cookie value or null if it is not defined\r\n */\r\n$module.get = function (name) {\r\n\tif (!name) {\r\n\t\treturn null;\r\n\t}\r\n\tvar cookiestring = RegExp(name + '=[^;]+').exec(document.cookie);\r\n\tif(cookiestring) {\r\n\t\treturn decodeURIComponent(cookiestring.toString().replace(/^[^=]+./, ''));\r\n\t}\r\n\treturn '';\r\n};\r\n\r\nexport default $module;","/** Creates a random tiny identified composed by 4 alphanumeric characters */\r\nfunction tinyId() {\r\n\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\n/** Creates a random short identified composed by 8 alphanumeric characters */\r\nfunction shortId() {\r\n\treturn tinyId() + tinyId();\r\n}\r\n\r\n/** Creates a random values simulating a global global unique identifier */\r\nfunction guid() {\r\n\treturn tinyId()\r\n\t\t+ '-' + tinyId()\r\n\t\t+ '-' + tinyId()\r\n\t\t+ '-' + tinyId()\r\n\t\t+ tinyId();\r\n}\r\n\r\nexport default { tinyId, shortId, guid };","/** Invokes a function with exception management */\r\nfunction trigger(fnc, ...params) {\r\n\tif(fnc === null || fnc === undefined) {\r\n\t\treturn;\r\n\t} else if(typeof(fnc) !== 'function') {\r\n\t\tthrow new Error('erebus.handler.trigger.invalid_function');\r\n\t}\r\n\ttry {\r\n\t\treturn fnc.call(null, ...params);\r\n\t} catch(ex) {\r\n\t\tthrow new Error('erebus.handlers.trigger.function_error', ex);\r\n\t}\r\n}\r\n\r\n/** Invokes a function with exception management */\r\nfunction triggerAsPromise(fnc, ...params) {\r\n\tif(fnc === null || fnc === undefined) {\r\n\t\treturn Promise.resolve();\r\n\t} else if(typeof(fnc) !== 'function') {\r\n\t\treturn Promise.reject('erebus.handler.trigger_promise_function.invalid_function');\r\n\t}\r\n\treturn new Promise(function(resolve, reject) {\r\n\t\ttry {\r\n\t\t\tconst result = fnc.call(null, ...params);\r\n\t\t\tresolve(result);\r\n\t\t} catch(ex) {\r\n\t\t\tconsole.error('erebus.handlers.trigger_promise_function.function_error', ex);\r\n\t\t\treject(ex);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport default { trigger, triggerAsPromise };","import handler from './handler.mjs';\r\n\r\n/**\r\n * Allows to register a callback to be executed when the document ready state has been reached\r\n * @param callback Function to be executed when the document ready is reached\r\n */\r\nfunction onReady(callback) {\r\n\tif (document.readyState !== 'loading') {\r\n\t\tcallback();\r\n\t} else if (typeof (document.addEventListener) === 'function') {\r\n\t\tdocument.addEventListener('DOMContentLoaded', callback, false);\r\n\t} else if (typeof (document.attachEvent) === 'function') {\r\n\t\tdocument.attachEvent('onreadystatechange', function () {\r\n\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Internal method to assign an animation class to an element and invoke a callback when is completed\r\n * @param target Reference to the HTMLElement (or ErebusElement) to animate\r\n * @param animationClass String with the CSS animation name to apply\r\n * @param callback Function to invoked when the animation is completed \r\n */\r\nfunction waitAnimation(target, animationClass, callback) {\r\n\tif (!target) {\r\n\t\tthrow new Error('erebus.events.wait_animation.invalid_target');\r\n\t} else if (!animationClass) {\r\n\t\tthrow new Error('erebus.events.wait_animation.invalid_animation');\r\n\t} else if (typeof (callback) !== 'function') {\r\n\t\tthrow new Error('erebus.events.wait_animation.invalid_callback');\r\n\t}\r\n\ttarget.addEventListener('animationend', function () {\r\n\t\thandler.trigger(callback);\r\n\t}, { capture: false, once: true });\r\n\tif (target.className === '') {\r\n\t\ttarget.className = animationClass;\r\n\t} else if (typeof (target.addClass) === 'function') {\r\n\t\ttarget.addClass(animationClass);\r\n\t} else {\r\n\t\ttarget.className += ' ' + animationClass;\r\n\t}\r\n}\r\n\r\nexport default { onReady, waitAnimation };","import utils from './utils.mjs';\r\n\r\nconst $scope = {};\r\n\r\n/**\r\n * Parses a string HTML content and returns its content or null if it is not HTML content\r\n * @param {string} content HTML content to parse\r\n * @returns DOM elements representing the content\r\n */\r\nfunction parseHTML(content) {\r\n\tif (!content || typeof (content) !== 'string') {\r\n\t\treturn [];\r\n\t}\r\n\tconst holder = document.createElement('div');\r\n\tholder.innerHTML = content;\r\n\treturn [...holder.childNodes];\r\n}\r\n\r\n/**\r\n * Removes all the child nodes from a specific element\r\n * @param {HTMLElement} Element to remove the childs from it\r\n */\r\nfunction removeAllChild(element) {\r\n\tif (!element || !(element instanceof HTMLElement)) {\r\n\t\treturn;\r\n\t}\r\n\twhile (element.firstChild) {\r\n\t\telement.removeChild(element.firstChild);\r\n\t}\r\n}\r\n\r\n/**\r\n * Executes a deep copy of an HTMLElement\r\n * @param {HTMLElement} sourceElement Element to copy\r\n * @returns Copy of the element\r\n */\r\nfunction cloneHTMLElement(sourceElement) {\r\n\tif (!sourceElement || !(sourceElement instanceof HTMLElement)) {\r\n\t\treturn null;\r\n\t}\r\n\tconst clonedElement = sourceElement.cloneNode(true);\r\n\tif (clonedElement.nodeType === 1) {\r\n\t\tclonedElement.removeAttribute('id'); // the element identifier should not be cloned\r\n\t}\r\n\treturn clonedElement;\r\n}\r\n\r\n/**\r\n * Internal method to create an ErebusElement based on the data provided\r\n * @param {*} source String with the selector, string with HTML code (to create a wrapper for it), reference to an HTMLElement\r\n * @returns \r\n */\r\nfunction getElement(source) {\r\n\tif (!source) {\r\n\t\treturn null;\r\n\t} else if (source instanceof ErebusElement) {\r\n\t\treturn source;\r\n\t} else if (source === 'body' || source === document.body) {\r\n\t\tif (!$scope.body) {\r\n\t\t\t$scope.body = new ErebusElement(document.body);\r\n\t\t}\r\n\t\treturn $scope.body;\r\n\t} else if (source instanceof HTMLElement) {\r\n\t\treturn new ErebusElement(source);\r\n\t} else if (typeof (source) === 'string') {\r\n\t\tvar nativeSource;\r\n\t\tif (source.startsWith('<') && source.endsWith('>')) {\r\n\t\t\tnativeSource = parseHTML(source);\r\n\t\t} else if (source.startsWith('#')) {\r\n\t\t\tnativeSource = document.getElementById(source.substring(1));\r\n\t\t\tif (!nativeSource) {\r\n\t\t\t\tthrow Error('erebus.element.unknown_element_id[' + source + ']');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tnativeSource = document.querySelectorAll(source);\r\n\t\t\tif (nativeSource.length === 0) {\r\n\t\t\t\tthrow Error('erebus.element.unknown_selector[' + source + ']');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new ErebusElement(nativeSource);\r\n\t}\r\n}\r\n\r\n/** Wrapper to allow common methods to handle HTML content */\r\nclass ErebusElement {\r\n\t#wrappedElements;\r\n\t#hidden;\r\n\r\n\tconstructor(element) {\r\n\t\tthis.#hidden = false;\r\n\t\tif (element instanceof HTMLElement) {\r\n\t\t\tthis.#wrappedElements = [];\r\n\t\t\tthis.#wrappedElements.push(element);\r\n\t\t} else if (element instanceof NodeList) {\r\n\t\t\tthis.#wrappedElements = Array.from(element);\r\n\t\t} else if (Array.isArray(element)) {\r\n\t\t\tthis.#wrappedElements = element;\r\n\t\t} else {\r\n\t\t\tthrow Error('erebus.element.unknown_type[' + typeof (element) + ']');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Iterates each wrapped element and invokes a handler that receives each separate instane\r\n\t * @param {function} handler Function that receives each separated HTMLElement wrapped, the function\r\n\t * \t\t\treceives the instance and an integer with the index of the element\r\n\t */\r\n\teach(handler) {\r\n\t\tfor (let wdx = 0; wdx < this.#wrappedElements.length; wdx++) {\r\n\t\t\tconst result = handler(this.#wrappedElements[wdx], wdx);\r\n\t\t\tif (result === false) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the innerHTML on the wrapped elements\r\n\t */\r\n\tset innerHTML(value) {\r\n\t\tthis.each(element => {\r\n\t\t\telement.innerHTML = value;\r\n\t\t});\r\n\t}\r\n\r\n\t/** Remove all the content from the current instance */\r\n\tclear() {\r\n\t\tthis.each((element) => {\r\n\t\t\telement.innerHTML = '';\r\n\t\t\tremoveAllChild(element);\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the content inside the wrapped elements.  This method is preferred over innerHTML\r\n\t * since it cleans the event listener associated with the child nodes.\r\n\t * @param {*} value String with the content to add (text or HTML), a reference to a HTMLElement to set as the content\r\n\t * \t\t\tor a reference to another ErebusElement.\r\n\t * @returns The current wrapper instance\r\n\t */\r\n\tcontent(value) {\r\n\t\tthis.each((element, index) => {\r\n\t\t\tif (typeof (value) === 'string') {\r\n\t\t\t\telement.innerHTML = value;\r\n\t\t\t} else if (value instanceof HTMLElement) {\r\n\t\t\t\telement.innerHTML = '';\r\n\t\t\t\tremoveAllChild(element);\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\telement.appendChild(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.appendChild(cloneHTMLElement(value));\r\n\t\t\t\t}\r\n\t\t\t} else if (value instanceof ErebusElement) {\r\n\t\t\t\telement.innerHTML = '';\r\n\t\t\t\tremoveAllChild(element);\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\tvalue.setParentNode(element);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue.clone().setParentNode(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Append the current instance to a specific parent\r\n\t * @param {*} parent String with the parent selector, reference to the HTMLElement to use as a parent or\r\n\t * \t\t\treference to an ErebusElement or null to detach the wrapped elements\r\n\t * @returns The current wrapper instance\r\n\t */\r\n\tsetParentNode(parent) {\r\n\t\tif (!parent) {\r\n\t\t\tthis.each(element => {\r\n\t\t\t\tif(element.parentNode) {\r\n\t\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof (parent) === 'string') {\r\n\t\t\tparent = getElement(parent);\r\n\t\t} else if (typeof (parent.appendChild) !== 'function') {\r\n\t\t\tthrow Error('erebus.wrapper.append_to.invalid_parent[' + typeof (parent) + ']');\r\n\t\t}\r\n\t\tthis.each(element => {\r\n\t\t\tparent.appendChild(element);\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/** Alias to the setParent node method that allows to enable compatibility with DOM elements */\r\n\tset parentNode(parent) {\r\n\t\tthis.setParentNode(parent);\r\n\t}\r\n\r\n\t/**\r\n\t * Append a child element to the wrapped element\r\n\t * @param {*} value String with the HTML element to add or reference to the HTML element to add or \r\n\t * \t\t\treference to the ErebusElement to add.\r\n\t * @returns \r\n\t */\r\n\tappendChild(value) {\r\n\t\tif (typeof (value) === 'string') {\r\n\t\t\tconst parsedContent = parseHTML(value);\r\n\t\t\tthis.each((element, index) => {\r\n\t\t\t\tfor (let idx = 0; idx < parsedContent.length; idx++) {\r\n\t\t\t\t\tconst content = parsedContent[idx];\r\n\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\telement.appendChild(content);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.appendChild(cloneHTMLElement(content));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.each((element, index) => {\r\n\t\t\t\tif (value instanceof HTMLElement) {\r\n\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\telement.appendChild(value);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement.appendChild(cloneHTMLElement(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (value instanceof ErebusElement) {\r\n\t\t\t\t\tvalue.each(innerElement => {\r\n\t\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\t\telement.appendChild(innerElement);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.appendChild(cloneHTMLElement(innerElement));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a listener to the current instance and its wrapped elements\r\n\t * @param {string} eventName Name of the event. For example click.\r\n\t * @param {function} listener Function to invoke when the event is triggered\r\n\t * @param {object} options Optional object with the options to set the listener (see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)\r\n\t * @returns Current element instance to write fluid expressions\r\n\t */\r\n\taddEventListener(eventName, listener, options) {\r\n\t\tif (!eventName) {\r\n\t\t\tthrow Error('erebus.element.add_listener.null_event_name');\r\n\t\t} else if (typeof (listener) === 'function') {\r\n\t\t\tif (options === undefined) {\r\n\t\t\t\toptions = { capture: false };\r\n\t\t\t}\r\n\t\t\tthis.each(element => {\r\n\t\t\t\telement.addEventListener(eventName, listener, options);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a single execution listener to the current instance and its wrapped elements\r\n\t * @param {string} eventName Name of the event. For example click.\r\n\t * @param {function} listener Function to invoke when the event is triggered\r\n\t * @returns Current element instance to write fluid expressions\r\n\t */\r\n\tonce(eventName, listener) {\r\n\t\treturn this.addEventListener(eventName, listener, { capture: false, once: true });\r\n\t}\r\n\r\n\t/** Allows to determine if the element is hidden or not */\r\n\tget isHidden() {\r\n\t\treturn this.#hidden;\r\n\t}\r\n\r\n\t/** Hides the wrapped elements to make it invisible */\r\n\thide() {\r\n\t\tif (this.#hidden) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#hidden = true;\r\n\t\tthis.each(element => {\r\n\t\t\tconst computedDisplay = getComputedStyle(element).getPropertyValue('display');\r\n\t\t\tif (computedDisplay && computedDisplay !== 'none') {\r\n\t\t\t\telement.originalDisplay = computedDisplay;\r\n\t\t\t}\r\n\t\t\telement.style.display = 'none';\r\n\t\t});\r\n\t}\r\n\r\n\t/** Shows the wrapped elements to make it visible */\r\n\tshow() {\r\n\t\tthis.#hidden = false;\r\n\t\tthis.each(element => {\r\n\t\t\tconst computedDisplay = getComputedStyle(element).getPropertyValue('display');\r\n\t\t\tif (!computedDisplay || computedDisplay === 'none') {\r\n\t\t\t\tif (element.originalDisplay) {\r\n\t\t\t\t\telement.style.display = element.originalDisplay;\r\n\t\t\t\t\tdelete element.originalDisplay;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.style.display = 'block';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/** Clone the current instance */\r\n\tclone() {\r\n\t\tconst clonedWrapped = [];\r\n\t\tthis.each(element => {\r\n\t\t\tclonedWrapped.push(cloneHTMLElement(element));\r\n\t\t});\r\n\t\treturn new ErebusElement(clonedWrapped);\r\n\t}\r\n\r\n\t/** Adds a new CSS class to the HTMLElements wrapped by the current instance */\r\n\taddClass(...classes) {\r\n\t\tif (!classes || classes.length === 0) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tthis.each(element => {\r\n\t\t\tfor (var cdx = 0; cdx < classes.length; cdx++) {\r\n\t\t\t\tconst className = utils.trim(classes[cdx]);\r\n\t\t\t\tif (!className || typeof (className) !== 'string') {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (!element.className) {\r\n\t\t\t\t\telement.className = className;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst regex = new RegExp('(^|\\\\s)(' + className + ')($|\\\\s)', 'g');\r\n\t\t\t\t\tif (!regex.test(element.className)) {\r\n\t\t\t\t\t\telement.className += ' ' + className;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/** Adds a new CSS class to the HTMLElements wrapped by the current instance */\r\n\tremoveClass(...classes) {\r\n\t\tif (!classes || classes.length === 0) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tthis.each(element => {\r\n\t\t\tif (!element.className) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor (var cdx = 0; cdx < classes.length; cdx++) {\r\n\t\t\t\tconst className = utils.trim(classes[cdx]);\r\n\t\t\t\tif (!className || typeof (className) !== 'string') {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst regex = new RegExp('(^|\\\\s)(' + className + ')($|\\\\s)', 'g');\r\n\t\t\t\tif (regex.test(element.className)) {\r\n\t\t\t\t\telement.className = element.className.replace(regex, '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/** Set the CSS class name for the HTMLElements wrapped by the current instance */\r\n\tset className(value) {\r\n\t\tvalue = utils.trim(value);\r\n\t\tthis.each(element => {\r\n\t\t\telement.className = value;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default getElement;","import utils from './utils.mjs';\r\n\r\nconst $module = {};\r\n/** Internal scoped variable holders */\r\nconst $scope = {};\r\n/** Holds all the estandard parsers defined for the library */\r\n$scope.parsers = {};\r\n\r\n/** Creates the underlying XMLHTTP object used to execute ajax calls */\r\nfunction createXmlHttp() {\r\n\tif (window.XMLHttpRequest) {\r\n\t\treturn new window.XMLHttpRequest();\r\n\t}\r\n\ttry {\r\n\t\treturn new ActiveXObject('Msxml2.XMLHTTP');\r\n\t} catch (ex) {\r\n\t\ttry {\r\n\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t} catch (ex) {\r\n\t\t\tthrow Error('erebus.http.xmlhttp_error');\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Internal method to extract the response headers associated with a particular XMLHTTP request\r\n * @param request Instance of the XMLHTTP that initiated the request\r\n * @returns Object with all the headers as attributes\r\n */\r\nfunction getResponseHeaders(request) {\r\n\tconst headers = {};\r\n\tlet rawHeaders = request.getAllResponseHeaders();\r\n\tif (rawHeaders) {\r\n\t\trawHeaders = rawHeaders.split('\\r\\n');\r\n\t\tfor (let idx = 0; idx < rawHeaders.length; idx++) {\r\n\t\t\tif (!rawHeaders[idx]) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst parts = rawHeaders[idx].split(':');\r\n\t\t\t// NOTE: on older browsers the header name can have mixed case, on recent browsers it is only lowercase\r\n\t\t\tconst headerName = utils.trim(parts[0]).toLowerCase();\r\n\t\t\tconst headerValue = utils.trim(parts[1]);\r\n\t\t\tif(headerName && headerValue) {\r\n\t\t\t\theaders[headerName] = headerValue;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn headers;\r\n}\r\n\r\n/**\r\n * Internal utility method to set request headers\r\n * @param {*} request XHR object representing the request\r\n * @param {*} headers Object with the headers to set. Each header is an attribute in the object\r\n */\r\nfunction setRequestHeaders(request, headers) {\r\n\tif (headers) {\r\n\t\tfor (var headerName in headers) {\r\n\t\t\trequest.setRequestHeader(headerName, headers[headerName]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/** Parses a response as a JSON */\r\n$scope.parsers['json'] = function (response) {\r\n\ttry {\r\n\t\treturn JSON.parse(response);\r\n\t} catch (ex) {\r\n\t\tconst err = new Error('erebus.http.json_parse_error');\r\n\t\terr.cause = ex;\r\n\t\terr.response = response;\r\n\t\tthrow err;\r\n\t}\r\n};\r\n\r\n/** Internal method to obtain the proper parser according to the content type or null if no transformations are required */\r\nfunction getResponseParser(headers) {\r\n\tif (headers && headers['content-type'] === 'application/json') {\r\n\t\treturn $scope.parsers['json'];\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * \r\n * @param url String with the resource URL to be requested\r\n * @param options Object with the options to execute the request. The values are:\r\n * \t\t\t\t\t- method: String with the HTTP method to execute: GET, POST, PUT, DELETE. If this is not provided, GET will be used by default.\r\n * \t\t\t\t\t- async: Boolean value to determine if the request should be asynchronous (true) or not. By default it is true.\r\n *                  - data: Data to be included in a POST, PUT or DELETE request\r\n * @returns Promise to be fulfilled according to the HTTP request result\r\n */\r\nfunction executeRequest(method, url, options) {\r\n\tif (typeof (url) !== 'string' || !url) {\r\n\t\treturn Promise.reject('erebus.http.null_url');\r\n\t}\r\n\tif (!options) {\r\n\t\toptions = {};\r\n\t}\r\n\tif (!method) {\r\n\t\tmethod = 'GET';\r\n\t}\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tconst request = createXmlHttp();\r\n\t\trequest.onreadystatechange = function () {\r\n\t\t\tif (request.readyState == 4 || request.readyState === 'complete') {\r\n\t\t\t\tif (request.status !== 200) {\r\n\t\t\t\t\tconst err = new Error('http_error[' + request.status + ']');\r\n\t\t\t\t\terr.status = request.status;\r\n\t\t\t\t\terr.response = request.responseText;\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar response = request.responseText;\r\n\t\t\t\t\tconst headers = getResponseHeaders(request);\r\n\t\t\t\t\tconst parser = getResponseParser(headers);\r\n\t\t\t\t\tif (parser) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresponse = parser(response);\r\n\t\t\t\t\t\t} catch(ex) {\r\n\t\t\t\t\t\t\treject(ex);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof (options.interceptor) === 'function') {\r\n\t\t\t\t\t\tconst result = options.interceptor(response, headers);\r\n\t\t\t\t\t\tif(result !== undefined) {\r\n\t\t\t\t\t\t\tresponse = result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(response);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\trequest.open(method, url, options.async !== false);\r\n\t\tsetRequestHeaders(request, options.headers);\r\n\t\tif (method === 'GET' || !options.data) {\r\n\t\t\trequest.send();\r\n\t\t} else {\r\n\t\t\trequest.send(options.data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Executes a HTTP GET request\r\n * @param {string} url String with the resource URL to request\r\n * @param {object} options Object with the options to execute the request.  The attributes are:\r\n * \t\t\t- headers: Object with the headers to pass\r\n * \t\t\t- interceptor: Optional function to capture and process the response received.  The function will receive\r\n * \t\t\t\t\ttwo parameters: the response content and the response headers\r\n * \t\t\t- async: Optional boolean value to determine if the call should be asynchronous or not. By default all\r\n * \t\t\t\t\trequests are asynchronous\r\n * @returns Promise to be fullfilled or rejecting according to the executed request\r\n */\r\n$module.get = function (url, options) {\r\n\treturn executeRequest('GET', url, options);\r\n};\r\n\r\n/**\r\n * Executes a HTTP POST request\r\n * @param {string} url String with the resource URL to request\r\n * @param {object} options Object with the options to execute the request.  The attributes are:\r\n * \t\t\t- headers: Object with the headers to pass\r\n * \t\t\t- interceptor: Optional function to capture and process the response received.  The function will receive\r\n * \t\t\t\t\ttwo parameters: the response content and the response headers\r\n * \t\t\t- async: Optional boolean value to determine if the call should be asynchronous or not. By default all\r\n * \t\t\t\t\trequests are asynchronous\r\n * \t\t\t- data: Data to include in the post request\r\n * @returns Promise to be fullfilled or rejecting according to the executed request\r\n */\r\n$module.post = function (url, options) {\r\n\treturn executeRequest('POST', url, options);\r\n};\r\n\r\n/**\r\n * Executes a HTTP PUT request\r\n * @param {string} url String with the resource URL to request\r\n * @param {object} options Object with the options to execute the request.  The attributes are:\r\n * \t\t\t- headers: Object with the headers to pass\r\n * \t\t\t- interceptor: Optional function to capture and process the response received.  The function will receive\r\n * \t\t\t\t\ttwo parameters: the response content and the response headers\r\n * \t\t\t- async: Optional boolean value to determine if the call should be asynchronous or not. By default all\r\n * \t\t\t\t\trequests are asynchronous\r\n * \t\t\t- data: Data to include in the post request\r\n * @returns Promise to be fullfilled or rejecting according to the executed request\r\n */\r\n$module.put = function (url, options) {\r\n\treturn executeRequest('PUT', url, options);\r\n};\r\n\r\n/**\r\n * Executes a HTTP DELETE request\r\n * @param {string} url String with the resource URL to request\r\n * @param {object} options Object with the options to execute the request.  The attributes are:\r\n * \t\t\t- headers: Object with the headers to pass\r\n * \t\t\t- interceptor: Optional function to capture and process the response received.  The function will receive\r\n * \t\t\t\t\ttwo parameters: the response content and the response headers\r\n * \t\t\t- async: Optional boolean value to determine if the call should be asynchronous or not. By default all\r\n * \t\t\t\t\trequests are asynchronous\r\n * \t\t\t- data: Data to include in the post request\r\n * @returns Promise to be fullfilled or rejecting according to the executed request\r\n */\r\n$module.delete = function (url, options) {\r\n\treturn executeRequest('DELETE', url, options);\r\n};\r\n\r\n/**\r\n * Loads a JavaScript resource dynamically\r\n * @param url URL to load the script from it\r\n * @returns Promise that allows to handle the script loading actions\r\n */\r\n$module.loadScript = function (url) {\r\n\treturn new Promise((resolve) => {\r\n\t\tvar element = document.createElement('script');\r\n\t\telement.src = url;\r\n\t\telement.type = 'text/javascript';\r\n\t\telement.async = false;\r\n\t\telement.onerror = () => {\r\n\t\t\t/*\r\n\t\t\treject(errorHandler.create({\r\n\t\t\t\tmodule: $moduleName,\r\n\t\t\t\tcode: `erebus.http.load_script_error[${url}]`\r\n\t\t\t})); // TODO: collect error info\r\n\t\t\t*/\r\n\t\t};\r\n\t\telement.onload = () => {\r\n\t\t\tresolve();\r\n\t\t};\r\n\t\tdocument.head.appendChild(element);\r\n\t});\r\n};\r\n\r\nexport default $module;","import handler from './handler.mjs';\r\nimport utils from './utils.mjs';\r\n\r\nconst $scope = {};\r\n// Holds the language defined for the application\r\n$scope.language = null;\r\n// Holds all the resources defined\r\n$scope.resources = {};\r\n\r\n/** Allows to obtain the locale code in the client */\r\nfunction getLocale() {\r\n\tif (navigator.language) {\r\n\t\treturn navigator.language;\r\n\t} else if (navigator.browserLanguage) {\r\n\t\treturn navigator.browserLanguage;\r\n\t}\r\n\treturn 'en-US';\r\n}\r\n\r\n/** Obtains the default language defined for the current system */\r\nfunction getSystemLanguage() {\r\n\treturn getLocale().substr(0, 2);\r\n}\r\n\r\n/**\r\n * Allows to set the language used by the application\r\n * @param {string} value Two letter ISO language code\r\n */\r\nfunction setLanguage(value) {\r\n\t$scope.language = value;\r\n}\r\n\r\n/** Obtains the language defined for the application */\r\nfunction getLanguage() {\r\n\tif (!$scope.language) {\r\n\t\treturn getSystemLanguage();\r\n\t}\r\n\treturn $scope.language;\r\n}\r\n\r\n/**\r\n * Sets the resource bundle for a specific language\r\n * @param {*} resource Object with the labels and values, function providing the object with the label and values\r\n * \t\t\t\tor promise to be fulfilled with the label and values\r\n * @param {*} langCode String with the language code or omit to use the system default language\r\n */\r\nfunction setResourceBundle(resource, langCode) {\r\n\tif (!resource) {\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\tif (!langCode) {\r\n\t\tlangCode = getLanguage();\r\n\t}\r\n\tif (typeof (resource) === 'function') {\r\n\t\tconst result = handler.trigger(resource);\r\n\t\treturn setResourceBundle(result, langCode);\r\n\t} else if (utils.isPromise(resource)) {\r\n\t\treturn resource.then(function (result) {\r\n\t\t\treturn setResourceBundle(result, langCode);\r\n\t\t}).catch(function (ex) {\r\n\t\t\tconst err = Error('erebus.i18n.promise_resource_error');\r\n\t\t\terr.cause = ex;\r\n\t\t\tthrow err;\r\n\t\t});\r\n\t}\r\n\tconst target = $scope.resources[langCode];\r\n\tif(!target) {\r\n\t\t$scope.resources[langCode] = resource;\r\n\t} else {\r\n\t\tObject.assign(target, resource);\r\n\t}\r\n\treturn Promise.resolve();\r\n}\r\n\r\n/**\r\n * Obtains an i18n label for the language defined in the syste,\r\n * @param {*} key Key to obtain the value for it\r\n * @param {*} defaultValue Default value in case that no language resource has been set\r\n */\r\nfunction getLabel(key, defaultValue) {\r\n\tconst langCode = getLanguage();\r\n\tconst resources = $scope.resources[langCode];\r\n\tif (!resources || !resources[key]) {\r\n\t\treturn defaultValue ?? key;\r\n\t}\r\n\treturn resources[key];\r\n}\r\n\r\nexport default { getLocale, getSystemLanguage, setLanguage, getLanguage, setResourceBundle, getLabel };\r\n","'use strict';\r\nconsole.log('Erebus Core v0.0.12');\r\n\r\nimport utils from './utils.mjs';\r\nimport cookies from './cookies.mjs';\r\nimport random from './random.mjs';\r\nimport events from './events.mjs';\r\nimport handler from './handler.mjs';\r\nimport element from './element.mjs';\r\nimport http from './http.mjs';\r\nimport i18n from './i18n.mjs';\r\n\r\nexport default { utils, cookies, random, events, handler, element, http, i18n };\r\n"],"names":["$module","value","Promise","_typeof","then","replace","tinyId","Math","random","toString","substring","set","name","timespan","Error","expireDate","Date","setTime","getTime","cookie","utils","trim","toGMTString","document","get","cookiestring","RegExp","exec","decodeURIComponent","shortId","guid","trigger","fnc","params","call","ex","triggerAsPromise","resolve","reject","console","error","onReady","callback","readyState","addEventListener","attachEvent","waitAnimation","target","animationClass","handler","capture","once","className","addClass","$scope","parseHTML","content","holder","createElement","innerHTML","childNodes","removeAllChild","element","HTMLElement","firstChild","removeChild","cloneHTMLElement","sourceElement","clonedElement","cloneNode","nodeType","removeAttribute","getElement","source","ErebusElement","body","nativeSource","startsWith","endsWith","getElementById","querySelectorAll","length","push","NodeList","Array","from","isArray","wdx","_classPrivateFieldGet","each","this","index","appendChild","setParentNode","clone","parent","parentNode","parsedContent","idx","innerElement","eventName","listener","options","undefined","computedDisplay","getComputedStyle","getPropertyValue","originalDisplay","style","display","clonedWrapped","classes","cdx","test","regex","executeRequest","method","url","request","window","XMLHttpRequest","ActiveXObject","createXmlHttp","onreadystatechange","status","err","response","responseText","headers","rawHeaders","getAllResponseHeaders","split","parts","headerName","toLowerCase","headerValue","getResponseHeaders","parser","parsers","getResponseParser","interceptor","result","open","async","setRequestHeader","setRequestHeaders","data","send","JSON","parse","cause","post","put","loadScript","src","type","onerror","onload","head","getLocale","navigator","language","browserLanguage","getSystemLanguage","substr","getLanguage","resources","setLanguage","setResourceBundle","resource","langCode","isPromise","Object","assign","getLabel","key","defaultValue","log","cookies","events","http","i18n"],"mappings":"o5DAAA,IAAMA,EAAU,WAOI,SAASC,WACvBA,IAGGA,aAAiBC,SAAaC,EAAuB,aAAfF,EAAMG,OAAiD,mBAAjBH,eAItE,SAAUA,SACH,iBAAXA,EACFA,EAEDA,EAAMI,QAAQ,qCAAsC,MCjBtDL,EAAU,GCDhB,SAASM,WACuB,OAArB,EAAIC,KAAKC,UAAuB,GAAGC,SAAS,IAAIC,UAAU,KDQ7DC,IAAM,SAAUC,EAAMX,EAAOY,OAC/BD,QACEE,MAAM,uCAEa,iBAAdD,IACXA,EAAW,UAENE,EAAa,IAAIC,KACvBD,EAAWE,QAAQF,EAAWG,UAAwB,IAAXL,OACvCM,EAASC,EAAMC,KAAKT,GAAQ,IAAMX,EAAQ,aAAec,EAAWO,cAAgB,WACxFC,SAASJ,OAASA,KAQXK,IAAM,SAAUZ,OAClBA,SACG,SAEJa,EAAeC,OAAOd,EAAO,UAAUe,KAAKJ,SAASJ,eACtDM,EACKG,mBAAmBH,EAAahB,WAAWJ,QAAQ,UAAW,KAE/D,UCjBO,CAAEC,OAAAA,EAAQuB,QAbzB,kBACQvB,IAAWA,KAYewB,KARlC,kBACQxB,IACJ,IAAMA,IACN,IAAMA,IACN,IAAMA,IACNA,YCgBW,CAAEyB,QA/BjB,SAAiBC,MACbA,MAAAA,GAEI,GAAmB,mBAATA,QACV,IAAIlB,MAAM,0EAJOmB,mCAAAA,2BAOhBD,EAAIE,WAAJF,GAAS,aAASC,IACxB,MAAME,SACD,IAAIrB,MAAM,yCAA0CqB,MAsBlCC,iBAjB1B,SAA0BJ,8BAAQC,mCAAAA,2BAC9BD,MAAAA,EACK9B,QAAQmC,UACU,mBAATL,EACT9B,QAAQoC,OAAO,4DAEhB,IAAIpC,SAAQ,SAASmC,EAASC,OAGnCD,EADeL,EAAIE,WAAJF,GAAS,aAASC,KAEhC,MAAME,GACPI,QAAQC,MAAM,0DAA2DL,GACzEG,EAAOH,eCmBK,CAAEM,QAxCjB,SAAiBC,GACY,YAAxBnB,SAASoB,WACZD,IACiD,mBAA/BnB,SAASqB,iBAC3BrB,SAASqB,iBAAiB,mBAAoBF,GAAU,GACZ,mBAA1BnB,SAASsB,aAC3BtB,SAASsB,YAAY,sBAAsB,WACd,aAAxBtB,SAASoB,YACZD,QAgCsBI,cApB1B,SAAuBC,EAAQC,EAAgBN,OACzCK,QACE,IAAIjC,MAAM,+CACV,IAAKkC,QACL,IAAIlC,MAAM,kDACV,GAA0B,mBAAd4B,QACZ,IAAI5B,MAAM,iDAEjBiC,EAAOH,iBAAiB,gBAAgB,WACvCK,EAAQlB,QAAQW,KACd,CAAEQ,SAAS,EAAOC,MAAM,IACF,KAArBJ,EAAOK,UACVL,EAAOK,UAAYJ,EACoB,mBAArBD,EAAOM,SACzBN,EAAOM,SAASL,GAEhBD,EAAOK,WAAa,IAAMJ,ICxCtBM,EAAS,GAOf,SAASC,EAAUC,OACbA,GAAgC,iBAAbA,QAChB,OAEFC,EAASlC,SAASmC,cAAc,cACtCD,EAAOE,UAAYH,IACRC,EAAOG,YAOnB,SAASC,EAAeC,MAClBA,GAAaA,aAAmBC,iBAG9BD,EAAQE,YACdF,EAAQG,YAAYH,EAAQE,YAS9B,SAASE,EAAiBC,QACpBA,GAAmBA,aAAyBJ,oBACzC,SAEFK,EAAgBD,EAAcE,WAAU,UACf,IAA3BD,EAAcE,UACjBF,EAAcG,gBAAgB,MAExBH,EAQR,SAASI,EAAWC,OACdA,SACG,KACD,GAAIA,aAAkBC,SACrBD,EACD,GAAe,SAAXA,GAAqBA,IAAWlD,SAASoD,YAC9CrB,EAAOqB,OACXrB,EAAOqB,KAAO,IAAID,EAAcnD,SAASoD,OAEnCrB,EAAOqB,KACR,GAAIF,aAAkBV,mBACrB,IAAIW,EAAcD,GACnB,GAAwB,iBAAZA,EAAsB,KACpCG,KACAH,EAAOI,WAAW,MAAQJ,EAAOK,SAAS,KAC7CF,EAAerB,EAAUkB,QACnB,GAAIA,EAAOI,WAAW,WAC5BD,EAAerD,SAASwD,eAAeN,EAAO/D,UAAU,WAEjDI,MAAM,qCAAuC2D,EAAS,aAIjC,KAD5BG,EAAerD,SAASyD,iBAAiBP,IACxBQ,aACVnE,MAAM,mCAAqC2D,EAAS,YAGrD,IAAIC,EAAcE,oCAKrBF,wBAIOZ,+LACI,GACXA,aAAmBC,qBACE,cACFmB,KAAKpB,QACrB,GAAIA,aAAmBqB,kBACLC,MAAMC,KAAKvB,QAC7B,CAAA,IAAIsB,MAAME,QAAQxB,SAGlBhD,MAAM,iCAAyCgD,GAAW,cAFxCA,8CAW1B,SAAKb,OACC,IAAIsC,EAAM,EAAGA,EAAMC,UAAsBP,SAE9B,IADAhC,EAAQuC,UAAsBD,GAAMA,GADEA,6BAWvD,SAActF,QACRwF,MAAK,SAAA3B,GACTA,EAAQH,UAAY1D,0BAKtB,uBACMwF,MAAK,SAAC3B,GACVA,EAAQH,UAAY,GACpBE,EAAeC,MAET4B,4BAUR,SAAQzF,eACFwF,MAAK,SAAC3B,EAAS6B,GACI,iBAAX1F,EACX6D,EAAQH,UAAY1D,EACVA,aAAiB8D,aAC3BD,EAAQH,UAAY,GACpBE,EAAeC,GACD,IAAV6B,EACH7B,EAAQ8B,YAAY3F,GAEpB6D,EAAQ8B,YAAY1B,EAAiBjE,KAE5BA,aAAiByE,IAC3BZ,EAAQH,UAAY,GACpBE,EAAeC,GACD,IAAV6B,EACH1F,EAAM4F,cAAc/B,GAEpB7D,EAAM6F,QAAQD,cAAc/B,OAIxB4B,kCASR,SAAcK,OACRA,cACCN,MAAK,SAAA3B,GACNA,EAAQkC,YACVlC,EAAQkC,WAAW/B,YAAYH,MAG1B4B,KACD,GAAwB,iBAAZK,EAClBA,EAASvB,EAAWuB,QACd,GAAoC,mBAAxBA,EAAOH,kBACnB9E,MAAM,6CAAqDiF,GAAU,iBAEvEN,MAAK,SAAA3B,GACTiC,EAAOH,YAAY9B,MAEb4B,6BAIR,SAAeK,QACTF,cAAcE,8BASpB,SAAY9F,MACY,iBAAXA,EAAqB,KAC1BgG,EAAgB1C,EAAUtD,QAC3BwF,MAAK,SAAC3B,EAAS6B,OACd,IAAIO,EAAM,EAAGA,EAAMD,EAAchB,OAAQiB,IAAO,KAC9C1C,EAAUyC,EAAcC,GAChB,IAAVP,EACH7B,EAAQ8B,YAAYpC,GAEpBM,EAAQ8B,YAAY1B,EAAiBV,kBAKnCiC,MAAK,SAAC3B,EAAS6B,GACf1F,aAAiB8D,YACN,IAAV4B,EACH7B,EAAQ8B,YAAY3F,GAEpB6D,EAAQ8B,YAAY1B,EAAiBjE,IAE5BA,aAAiByE,GAC3BzE,EAAMwF,MAAK,SAAAU,GACI,IAAVR,EACH7B,EAAQ8B,YAAYO,GAEpBrC,EAAQ8B,YAAY1B,EAAiBiC,iBAMnCT,qCAUR,SAAiBU,EAAWC,EAAUC,OAChCF,QACEtF,MAAM,qDACoB,mBAAduF,SACFE,IAAZD,IACHA,EAAU,CAAEpD,SAAS,SAEjBuC,MAAK,SAAA3B,GACTA,EAAQlB,iBAAiBwD,EAAWC,EAAUC,OAGzCZ,yBASR,SAAKU,EAAWC,UACRX,KAAK9C,iBAAiBwD,EAAWC,EAAU,CAAEnD,SAAS,EAAOC,MAAM,0BAI3E,oBACQuC,4BAIR,aACKA,oBAGW,QACVD,MAAK,SAAA3B,OACH0C,EAAkBC,iBAAiB3C,GAAS4C,iBAAiB,WAC/DF,GAAuC,SAApBA,IACtB1C,EAAQ6C,gBAAkBH,GAE3B1C,EAAQ8C,MAAMC,QAAU,+BAK1B,qBACgB,QACVpB,MAAK,SAAA3B,OACH0C,EAAkBC,iBAAiB3C,GAAS4C,iBAAiB,WAC9DF,GAAuC,SAApBA,IACnB1C,EAAQ6C,iBACX7C,EAAQ8C,MAAMC,QAAU/C,EAAQ6C,uBACzB7C,EAAQ6C,iBAEf7C,EAAQ8C,MAAMC,QAAU,iCAO5B,eACOC,EAAgB,eACjBrB,MAAK,SAAA3B,GACTgD,EAAc5B,KAAKhB,EAAiBJ,OAE9B,IAAIY,EAAcoC,2BAI1B,sCAAYC,2BAAAA,yBACNA,GAA8B,IAAnBA,EAAQ9B,aAGnBQ,MAAK,SAAA3B,OACJ,IAAIkD,EAAM,EAAGA,EAAMD,EAAQ9B,OAAQ+B,IAAO,KACxC5D,EAAYhC,EAAMC,KAAK0F,EAAQC,IAChC5D,GAAoC,iBAAfA,IAGrBU,EAAQV,UAGE,IAAI1B,OAAO,WAAa0B,EAAY,WAAY,KACnD6D,KAAKnD,EAAQV,aACvBU,EAAQV,WAAa,IAAMA,GAJ5BU,EAAQV,UAAYA,OAShBsC,MAlBCA,gCAsBT,sCAAeqB,2BAAAA,yBACTA,GAA8B,IAAnBA,EAAQ9B,aAGnBQ,MAAK,SAAA3B,MACJA,EAAQV,cAGR,IAAI4D,EAAM,EAAGA,EAAMD,EAAQ9B,OAAQ+B,IAAO,KACxC5D,EAAYhC,EAAMC,KAAK0F,EAAQC,OAChC5D,GAAoC,iBAAfA,OAGpB8D,EAAQ,IAAIxF,OAAO,WAAa0B,EAAY,WAAY,KAC1D8D,EAAMD,KAAKnD,EAAQV,aACtBU,EAAQV,UAAYU,EAAQV,UAAU/C,QAAQ6G,EAAO,UAIjDxB,MAjBCA,4BAqBT,SAAczF,GACbA,EAAQmB,EAAMC,KAAKpB,QACdwF,MAAK,SAAA3B,GACTA,EAAQV,UAAYnD,8FC1WjBD,EAAU,GAEVsD,EAAS,GAwFf,SAAS6D,EAAeC,EAAQC,EAAKf,SACf,iBAATe,GAAsBA,GAG7Bf,IACJA,EAAU,IAENc,IACJA,EAAS,OAEH,IAAIlH,SAAQ,SAAUmC,EAASC,OAC/BgF,EA9FR,cACKC,OAAOC,sBACH,IAAID,OAAOC,0BAGX,IAAIC,cAAc,kBACxB,MAAOtF,cAEA,IAAIsF,cAAc,qBACxB,MAAOtF,SACFrB,MAAM,+BAoFG4G,GAChBJ,EAAQK,mBAAqB,cACF,GAAtBL,EAAQ3E,YAA0C,aAAvB2E,EAAQ3E,cACf,MAAnB2E,EAAQM,OAAgB,KACrBC,EAAM,IAAI/G,MAAM,cAAgBwG,EAAQM,OAAS,KACvDC,EAAID,OAASN,EAAQM,OACrBC,EAAIC,SAAWR,EAAQS,aACvBzF,EAAOuF,OACD,KACFC,EAAWR,EAAQS,aACjBC,EApFX,SAA4BV,OACrBU,EAAU,GACZC,EAAaX,EAAQY,2BACrBD,EAAY,CACfA,EAAaA,EAAWE,MAAM,YACzB,IAAIjC,EAAM,EAAGA,EAAM+B,EAAWhD,OAAQiB,OACrC+B,EAAW/B,QAGVkC,EAAQH,EAAW/B,GAAKiC,MAAM,KAE9BE,EAAajH,EAAMC,KAAK+G,EAAM,IAAIE,cAClCC,EAAcnH,EAAMC,KAAK+G,EAAM,IAClCC,GAAcE,IAChBP,EAAQK,GAAcE,WAIlBP,EAkEaQ,CAAmBlB,GAC7BmB,EAtCX,SAA2BT,UACtBA,GAAuC,qBAA5BA,EAAQ,gBACf1E,EAAOoF,QAAP,KAED,KAkCYC,CAAkBX,MAC7BS,MAEFX,EAAWW,EAAOX,GACjB,MAAM3F,eACPG,EAAOH,MAI4B,mBAAzBmE,EAAQsC,YAA6B,KAC1CC,EAASvC,EAAQsC,YAAYd,EAAUE,QAC/BzB,IAAXsC,IACFf,EAAWe,GAGbxG,EAAQyF,KAIXR,EAAQwB,KAAK1B,EAAQC,GAAuB,IAAlBf,EAAQyC,OA9EpC,SAA2BzB,EAASU,MAC/BA,MACE,IAAIK,KAAcL,EACtBV,EAAQ0B,iBAAiBX,EAAYL,EAAQK,IA4E9CY,CAAkB3B,EAAShB,EAAQ0B,SACpB,QAAXZ,GAAqBd,EAAQ4C,KAGhC5B,EAAQ6B,KAAK7C,EAAQ4C,MAFrB5B,EAAQ6B,WA1CFjJ,QAAQoC,OAAO,0BAxFjBoG,QAAU,KA0DVA,QAAP,KAAyB,SAAUZ,cAE1BsB,KAAKC,MAAMvB,GACjB,MAAO3F,OACF0F,EAAM,IAAI/G,MAAM,sCACtB+G,EAAIyB,MAAQnH,EACZ0F,EAAIC,SAAWA,EACTD,IAmFR7H,EAAQwB,IAAM,SAAU6F,EAAKf,UACrBa,EAAe,MAAOE,EAAKf,IAenCtG,EAAQuJ,KAAO,SAAUlC,EAAKf,UACtBa,EAAe,OAAQE,EAAKf,IAepCtG,EAAQwJ,IAAM,SAAUnC,EAAKf,UACrBa,EAAe,MAAOE,EAAKf,IAenCtG,SAAiB,SAAUqH,EAAKf,UACxBa,EAAe,SAAUE,EAAKf,IAQtCtG,EAAQyJ,WAAa,SAAUpC,UACvB,IAAInH,SAAQ,SAACmC,OACfyB,EAAUvC,SAASmC,cAAc,UACrCI,EAAQ4F,IAAMrC,EACdvD,EAAQ6F,KAAO,kBACf7F,EAAQiF,OAAQ,EAChBjF,EAAQ8F,QAAU,aAQlB9F,EAAQ+F,OAAS,WAChBxH,KAEDd,SAASuI,KAAKlE,YAAY9B,OCjO5B,IAAMR,EAAS,GAOf,SAASyG,WACJC,UAAUC,SACND,UAAUC,SACPD,UAAUE,gBACbF,UAAUE,gBAEX,QAIR,SAASC,WACDJ,IAAYK,OAAO,EAAG,GAY9B,SAASC,WACH/G,EAAO2G,SAGL3G,EAAO2G,SAFNE,IA9BT7G,EAAO2G,SAAW,KAElB3G,EAAOgH,UAAY,SAiFJ,CAAEP,UAAAA,EAAWI,kBAAAA,EAAmBI,YA5D/C,SAAqBtK,GACpBqD,EAAO2G,SAAWhK,GA2DyCoK,YAAAA,EAAaG,kBA1CzE,SAASA,EAAkBC,EAAUC,OAC/BD,SACGvK,QAAQmC,aAEXqI,IACJA,EAAWL,KAEc,mBAAdI,SAEJD,EADQvH,EAAQlB,QAAQ0I,GACEC,GAC3B,GAAItJ,EAAMuJ,UAAUF,UACnBA,EAASrK,MAAK,SAAUyI,UACvB2B,EAAkB3B,EAAQ6B,aACzB,SAAUvI,OACZ0F,EAAM/G,MAAM,4CAClB+G,EAAIyB,MAAQnH,EACN0F,SAGF9E,EAASO,EAAOgH,UAAUI,UAC5B3H,EAGH6H,OAAOC,OAAO9H,EAAQ0H,GAFtBnH,EAAOgH,UAAUI,GAAYD,EAIvBvK,QAAQmC,WAiB4EyI,SAT5F,SAAkBC,EAAKC,OAChBN,EAAWL,IACXC,EAAYhH,EAAOgH,UAAUI,UAC9BJ,GAAcA,EAAUS,GAGtBT,EAAUS,GAFTC,MAAAA,EAAAA,EAAgBD,WClFzBxI,QAAQ0I,IAAI,uBAWG,CAAE7J,MAAAA,EAAO8J,QAAAA,EAAS1K,OAAAA,EAAQ2K,OAAAA,EAAQlI,QAAAA,EAASa,QAAAA,EAASsH,KAAAA,EAAMC,KAAAA"}